<?php

$transaction_id = isset($_GET['transaction']) ? $_GET['transaction'] : '';
$montant_recu = isset($_GET['montant']) ? $_GET['montant'] : '';
$status = isset($_GET['status']) ? $_GET['status'] : ''; // acceptée ou refusée


$control_recu = isset($_GET['control']) ? $_GET['control'] : '';
$control_calculé = md5($transaction_id . "#" . $montant_recu . "#VOTRE_VENDEUR" . "#" . $status . "#");

if ($control_recu !== $control_calculé) {
    die("<h2>Erreur de sécurité : données invalides.</h2>");
}

// si le paiement a été accepté ou refusé
if ($status === 'accepted') {
    // Si le paiement est accepté, afficher un message de succès
    echo "<h2>Paiement validé avec succès</h2>";
    echo "<p>Votre paiement de " . number_format($montant_recu, 2, '.', '') . "€ a été accepté.</p>";
    echo "<a href='presentation.php'>Revenir à la boutique</a>"; // Lien vers la boutique
} else {
    // Si le paiement est refusé, afficher un message d'erreur
    echo "<h2>Paiement refusé</h2>";
    echo "<p>Le paiement a été refusé. Veuillez vérifier vos informations et réessayer.</p>";
    echo "<a href='paiement.php'>Réessayer le paiement</a>"; // Lien vers la page de paiement
}
?>
